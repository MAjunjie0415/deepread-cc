# ✅ 操作清单 - 100% 成功保证

## 🎯 目标
让 DeepRead 能稳定获取 YouTube 字幕，不再报错！

## 📋 操作步骤（总共15分钟）

---

### 【第 1 步】创建 GitHub 仓库（2分钟）

1. ✅ 打开浏览器，访问：**https://github.com/new**
2. ✅ 填写：
   - Repository name: `deepread-subtitle-api`
   - Description: `DeepRead 字幕提取服务`
   - 选择 **Public**
   - **不要**勾选任何选项
3. ✅ 点击 **Create repository**
4. ✅ **保持这个页面打开**（后面要用）

---

### 【第 2 步】推送代码到 GitHub（1分钟）

**打开终端**，复制粘贴以下命令（**替换 YOUR_USERNAME**）：

```bash
cd /Users/mima0000/deepread-subtitle-api
git remote add origin https://github.com/YOUR_USERNAME/deepread-subtitle-api.git
git push -u origin main
```

✅ **验证**：刷新 GitHub 页面，看到 6 个文件即成功

---

### 【第 3 步】部署到 Zeabur（5分钟）

1. ✅ 打开浏览器，访问：**https://zeabur.com**
2. ✅ 点击 **Sign in** → **Continue with GitHub** → 授权

3. ✅ 创建项目：
   - 点击 **Create Project**
   - 输入名称：`deepread-subtitle`
   - 点击 **Create**

4. ✅ 部署服务：
   - 点击 **Add Service**
   - 选择 **Git**
   - 找到并点击 `deepread-subtitle-api` 仓库
   - 点击 **Deploy**

5. ✅ 等待部署（2-3分钟）
   - 看到 **Running** 就成功了！

6. ✅ 获取域名：
   - 点击服务卡片
   - 点击 **Domains** 标签
   - 点击 **Generate Domain**
   - **复制生成的域名** 📋（例如：`deepread-subtitle-api-abc123.zeabur.app`）

7. ✅ 测试 API（打开终端，替换域名）：
   ```bash
   curl https://你的域名.zeabur.app/
   ```
   看到 `"status": "ok"` 就成功了！

---

### 【第 4 步】配置 Vercel 前端（5分钟）

1. ✅ 打开文件：`/Users/mima0000/deepread-cc/src/app/api/pull/route.ts`

2. ✅ 找到第 5 行，修改为（**替换为你的 Zeabur 域名**）：
   ```typescript
   const SUBTITLE_API = process.env.SUBTITLE_API_URL || 'https://你的域名.zeabur.app/extract';
   ```
   
   **注意**：末尾要加 `/extract`！

3. ✅ 保存文件

4. ✅ 在 Vercel 添加环境变量：
   - 访问 **https://vercel.com/dashboard**
   - 进入 `deepread-cc` 项目
   - 点击 **Settings** → **Environment Variables**
   - 添加：
     - Name: `SUBTITLE_API_URL`
     - Value: `https://你的域名.zeabur.app/extract`
   - 点击 **Save**

5. ✅ 推送代码（打开终端）：
   ```bash
   cd /Users/mima0000/deepread-cc
   git add src/app/api/pull/route.ts
   git commit -m "配置 Zeabur 字幕 API"
   git push origin main
   ```

6. ✅ 等待 Vercel 部署（1-2分钟）
   - 访问 **https://vercel.com/dashboard**
   - 看到 **Ready** 就成功了！

---

### 【第 5 步】测试完整流程（2分钟）

1. ✅ 打开浏览器，访问：**https://deepread-cc.vercel.app**
2. ✅ 输入：`https://www.youtube.com/watch?v=7xTGNNLPyMI`
3. ✅ 点击 **"开始深度阅读"**
4. ✅ 等待 5-10 秒
5. ✅ 右侧应该显示完整字幕（1387段）

---

## 🎉 成功标志

看到以下内容就是**完全成功**：

```
✅ 字幕获取成功！
📝 1387 段
⏱️ 60:02
🔧 自动选择 (...)
```

最后一段字幕：
```
"all right thanks for watching everyone, I'll see you next time"
```

---

## 🆘 如果失败了

### 检查清单

- [ ] Zeabur 显示 **Running** 状态
- [ ] Zeabur API 测试返回 `"status": "ok"`
- [ ] Vercel 环境变量已添加
- [ ] API 地址末尾有 `/extract`
- [ ] Vercel 构建显示 **Ready**

### 获取帮助

**把以下信息发给我：**

1. Zeabur 生成的域名是什么？
2. Zeabur 控制台显示什么状态？
3. Vercel Function 日志（在 Vercel Dashboard → Functions → /api/pull）
4. 浏览器控制台错误（按 F12 查看）

我会立即帮你解决！

---

## 📊 架构图

```
你的浏览器
    ↓
Vercel 前端 (deepread-cc.vercel.app)
    ↓
Vercel API (/api/pull)
    ↓ [转发请求]
Zeabur API (你的域名.zeabur.app/extract)
    ↓ [使用专业库]
YouTube 字幕
```

**关键**：每一层都可以单独测试！

---

## 💡 为什么这个方案必定成功？

1. ✅ **Zeabur 不受限** - 独立的 Python 环境
2. ✅ **专业库支持** - youtube-transcript-api 被数千项目使用
3. ✅ **简单架构** - Vercel 只负责转发
4. ✅ **完整翻页** - 自动获取所有字幕
5. ✅ **易于调试** - 每层都可独立测试
6. ✅ **成本极低** - Zeabur 免费套餐足够

---

## 📝 重要提示

1. ⚠️ **域名末尾一定要加 `/extract`**
2. ⚠️ **Vercel 环境变量要在 Settings 里添加**
3. ⚠️ **推送代码后等 Vercel 自动部署完成**
4. ⚠️ **测试时打开浏览器控制台（F12）查看日志**

---

## 🚀 后续优化（可选）

- [ ] 给 Zeabur 服务配置自定义域名
- [ ] 添加字幕缓存（Redis）
- [ ] 支持用户上传本地字幕文件
- [ ] 添加字幕语言选择

---

**现在开始操作吧！严格按照步骤来，一定能成功！** 💪

